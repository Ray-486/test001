<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>修改用户</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <script src="Js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript">
            function saveuser(){
                var userinfo=new Object();
                userinfo.id=$("[name='id']").val();

                userinfo.logincode=$("[name='logincode']").val();
                userinfo.username=$("[name='username']").val();
                userinfo.password=$("[name='password']").val();
                userinfo.cardtypename=$("[name='cardtypename']").val();
                userinfo.idcard=$("[name='idcard']").val();
                userinfo.country=$("[name='country']").val();
                userinfo.mobile=$("[name='mobile']").val();
                userinfo.email=$("[name='email']").val();
                userinfo.useraddress=$("[name='useraddress']").val();
                userinfo.postcode=$("[name='postcode']").val();
                userinfo.rolename=$("[name='rolename']").val();
                userinfo.bankaccount=$("[name='bankaccount']").val();
                userinfo.bankname=$("[name='bankname']").val();
                userinfo.accountholder=$("[name='accountholder']").val();
                // userinfo.idcardpicpath=$("[name='idcardpicpath']").val();
                // userinfo.bankpicpath=$("[name='bankpicpath']").val();
                userinfo.usertypename=$("[name='usertypename']").val();

                $.ajax({
                    url: "/updateuser",
                    type: "POST",
                    data: {userinfo: JSON.stringify(userinfo)},
                    dataType: "text",
                    success: function (result) {
                        if (result) {
                            alert("更新成功！");
                            window.location="http://localhost:8080/back_user";
                        }else {
                            alert("更新失败-客户端！");
                        }
                    },
                    error: function () {
                        alert("更新失败-服务器！");
                    }
                });
            }

    </script>
</head>
<body>
<div class="ui container">

    <form th:object="${user}" >
        <input type="hidden" th:value="*{id}" name="id" >
        <table width="713" border="0" cellspacing="3" cellpadding="3" align="center">
            <tr>
                <td width="100" height="34">角色：</td>
<!--                <td width="320"><input type="text" name="rolename" id="rolename" th:value="*{rolename}">-->
                <td width="320" >
                <select name="rolename" id="rolename" th:value="*{rolename}">
                    <option value="会员" >会员</option>
                    <option value="管理员">管理员</option>
                    <option value="其他">其他</option>
                </select>
                </td>
                <td width="93" height="34">会员类型：</td>
<!--                <td width="320"><input type="text" name="usertypename" id="usertypename" th:value="*{usertypename}">-->
<!--                </td>-->
                <td width="320" >
                    <select name="usertypename" id="usertypename" th:value="*{usertypename}">
                        <option value="注册会员">注册会员</option>
                        <option value="消费会员">消费会员</option>
                        <option value="vip会员">vip会员</option>
                        <option value="加盟店">加盟店</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>账号：</td>
                <td><input type="text" name="logincode" id="logincode" th:value="*{logincode}" >
                <td>用户：</td>
                <td><input type="text" name="username" id="username" th:value="*{username}" required>
                <td>密码：</td>
                <td><input type="password" name="password" id="password" th:value="*{password}" required></td>
            </tr>

            <tr>
                <td width="93" height="34">证件类型：</td>
<!--                <td width="320"><input type="text" name="cardtypename" id="cardtypename" th:value="*{cardtypename}">-->

<!--                </td>-->
                <td width="320" >
                    <select name="cardtypename" id="cardtypename" th:value="*{cardtypename}">
                        <option value="二代身份证">二代身份证</option>
                        <option value="护照">护照</option>
                        <option value="军官证">军官证</option>
                    </select>
                </td>
                <td>证件号码：</td>
                <td><input type="text" name="idcard" id="idcard" th:value="*{idcard}" required>
            </tr>

            <tr>
                <td width="93" height="34">收货国家（地区）：</td>
<!--                <td width="320"><input type="text" name="country" id="country" th:value="*{country}">-->
<!--                </td>-->
                <td  >
                    <select name="country" id="country" width="320" th:value="*{country}">
                        <option value="中国">中国</option>
                        <option value="美国">美国</option>
                    </select>
                </td>
                <td>移动电话：</td>
                <td><input type="text" name="mobile" id="mobile" th:value="*{mobile}" required>
            </tr>

            <tr>
                <td>电子邮件：</td>
                <td><input type="text" name="email" id="email" th:value="*{email}" required>
                <td>邮政编码：</td>
                <td><input type="text" name="postcode" id="postcode" th:value="*{postcode}" required>
            </tr>

            <tr>
                <td>推荐人：</td>
                <td><input type="text" name="refercode" id="refercode" th:value="*{refercode}">
            </tr>


            <tr>
                <td>收货地址：</td>
                <td>
                    <textarea cols="40" rows="4" id="useraddress" name="useraddress" th:value="*{useraddress}"></textarea>
                </td>
            </tr>

            <tr>
                <td>开户行：</td>
                <td><input type="text" name="bankname" id="bankname" th:value="*{bankname}">
                <td>开户卡号：</td>
                <td><input type="text" name="bankaccount" id="bankaccount" th:value="*{bankaccount}">
            </tr>

            <tr>
                <td>开户人：</td>
                <td><input type="text" name="accountholder" id="accountholder" th:value="*{accountholder}">
            </tr>


<!--            <tr>-->
<!--                <td>上传身份证图片（正反面）：</td>-->
<!--                <td>-->
<!--                    <input type="file" name="idcardpicpath" id="idcardpicpath" th:value="*{idcardpicpath}">-->
<!--                </td>-->
<!--            </tr>-->

<!--            <tr>-->
<!--                <td>上传银行卡图片：</td>-->
<!--                <td>-->
<!--                    <input type="file" name="bankpicpath" id="bankpicpath" th:value="*{bankpicpath}">-->
<!--                </td>-->
<!--            </tr>-->

            <tr>
                <td>&nbsp;</td>
                <td>  <input type="button" name="save" id="save" value="提交" onclick="saveuser()"/>
                <td align="left"><input type="reset" name="chongzhi" id="chongzhi" value="重置"></td>
            </tr>

        </table>
    </form>

</div>

<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>

</body>
</html>